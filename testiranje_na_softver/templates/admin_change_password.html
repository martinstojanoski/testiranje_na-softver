{% extends "base.html" %}
{% block title %}Change Password{% endblock %}

{% block content %}
<style>
  body { background:#121212; color:#fff; font-family: Arial, sans-serif; }

  .card{
    max-width: 520px;
    margin: 80px auto;
    background:#1e1e1e;
    padding: 32px;
    border-radius: 18px;
    box-shadow: 0 8px 22px rgba(0,0,0,0.6);
    animation: fadeIn .35s ease-in-out;
  }
  @keyframes fadeIn { from{opacity:0; transform:translateY(14px);} to{opacity:1; transform:translateY(0);} }

  h2{ margin:0 0 8px 0; color:#f5f5f5; }
  .sub{ color:#bbb; font-size:14px; margin:0 0 18px 0; }

  label{ display:block; margin:12px 0 6px; font-weight:bold; color:#e0e0e0; }
  input{
    width:100%;
    padding:12px 14px;
    border:none;
    border-radius:10px;
    background:#2a2a2a;
    color:#fff;
    transition:.25s;
  }
  input:focus{ outline:none; box-shadow:0 0 6px #6200ea; background:#333; }

  .row{ display:flex; gap:10px; flex-wrap:wrap; margin-top:16px; }
  .btn{
    padding:12px 14px;
    border-radius:10px;
    border:none;
    cursor:pointer;
    background:#6200ea;
    color:#fff;
    font-size:14px;
    transition:.25s;
    text-decoration:none;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    gap:8px;
  }
  .btn:hover{ background:#7c4dff; transform:translateY(-1px); }
  .btn.secondary{
    background:#2a2a2a;
    border:1px solid #3a3a3a;
    color:#eaeaea;
  }
  .btn.secondary:hover{ background:#333; }

  .flash{ padding:12px; margin:14px 0; border-radius:8px; font-size:14px; text-align:center; }
  .flash.error{ background:#8b1e1e; border-left:4px solid #ff4d4d; }
  .flash.success{ background:#1e5f2b; border-left:4px solid #4dff8b; }
</style>

<div class="card">
  <h2>Change Password</h2>
  <p class="sub">
    User: <b>{{ u.username }}</b> (Role: <b>{{ u.role }}</b>)
  </p>

  {% with messages = get_flashed_messages(with_categories=True) %}
    {% if messages %}
      {% for category, msg in messages %}
        <div class="flash {{ category }}">{{ msg }}</div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <form method="POST">
    
    <label for="new_password">New password</label>
    <input type="password" name="password" required>

    <label for="confirm_password">Confirm new password</label>
    <input name="confirm_password" name="confirm_password" type="password" required minlength="4" placeholder="Confirm new password">

    <div class="row">
      <button class="btn" type="submit">Save Password</button>
      <a class="btn secondary" href="{{ url_for('admin_users') }}">‚Üê Back to Users</a>
    </div>
  </form>
</div>
{% endblock %}
