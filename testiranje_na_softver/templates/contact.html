{% extends "base.html" %}
{% block title %}Contact{% endblock %}

{% block content %}
<style>
  :root{
    --bg:#070708;
    --glass: rgba(20,20,22,.58);
    --stroke: rgba(255,215,0,.18);
    --stroke2: rgba(255,255,255,.10);
    --gold:#ffd700;
    --gold2:#c9a200;
    --text:#f2f2f2;
    --muted:#b9b9b9;
    --danger:#ff4d4d;
    --ok:#4dff8b;
    --vio:#bb86fc;
    --shadow: 0 26px 70px rgba(0,0,0,.86);
  }

  body{
    background:
      radial-gradient(900px 520px at 20% 0%, rgba(255,215,0,.10), transparent 60%),
      radial-gradient(700px 420px at 80% 15%, rgba(187,134,252,.11), transparent 55%),
      radial-gradient(circle at top, #171717, #0b0b0c 55%, #070708);
    color: var(--text);
    font-family: "Segoe UI", system-ui, -apple-system, Arial, sans-serif;
    overflow-x:hidden;
  }

  /* Cinematic grain */
  .grain{
    position:fixed; inset:0; z-index:0; pointer-events:none;
    opacity:.06;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='140' height='140'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='140' height='140' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
    mix-blend-mode: overlay;
  }

  /* particles */
  .bg-particles{ position:fixed; inset:0; pointer-events:none; z-index:0; opacity:.55; }
  .p{
    position:absolute; width:6px; height:6px; border-radius:999px;
    background: radial-gradient(circle, rgba(255,215,0,.9), rgba(255,215,0,.05));
    animation: float 10s ease-in-out infinite;
    filter: blur(.15px);
  }
  .p:nth-child(1){ left:8%; top:18%; animation-duration:10s; transform: scale(.8); }
  .p:nth-child(2){ left:18%; top:74%; animation-duration:11s; transform: scale(.6); }
  .p:nth-child(3){ left:62%; top:14%; animation-duration:12s; transform: scale(.7); }
  .p:nth-child(4){ left:86%; top:60%; animation-duration:13s; transform: scale(.9); }
  .p:nth-child(5){ left:50%; top:82%; animation-duration:14s; transform: scale(.55); }
  @keyframes float{
    0%,100%{ transform: translateY(0) translateX(0); opacity:.55; }
    50%{ transform: translateY(-18px) translateX(10px); opacity:.9; }
  }

  /* layout */
  .wrap{
    position:relative; z-index:1;
    min-height: calc(100vh - 160px);
    display:flex; align-items:center; justify-content:center;
    padding: 72px 14px;
  }
  .shell{
    width:100%;
    max-width: 1080px;
    display:grid;
    grid-template-columns: 1.1fr .9fr;
    gap: 22px;
    align-items: stretch;
  }

  /* LEFT: brand panel (same vibe as login) */
  .brand{
    border-radius: 30px;
    background:
      linear-gradient(145deg, rgba(255,215,0,.10), rgba(0,0,0,0) 35%),
      linear-gradient(145deg, #151516, #0e0e10);
    border: 1px solid rgba(255,215,0,.16);
    box-shadow: 0 26px 70px rgba(0,0,0,.80);
    padding: 38px;
    overflow:hidden;
    position: relative;
    animation: inUp 650ms ease both;
  }
  .brand::before{
    content:"";
    position:absolute;
    inset:-160px -200px auto auto;
    width: 560px; height: 560px;
    background: radial-gradient(circle, rgba(255,215,0,.22), transparent 62%);
    transform: rotate(15deg);
    pointer-events:none;
  }
  .brand::after{
    content:"";
    position:absolute;
    inset:auto -120px -140px auto;
    width: 360px; height: 360px;
    background: radial-gradient(circle, rgba(187,134,252,.16), transparent 62%);
    pointer-events:none;
  }

  .brand-top{ display:flex; align-items:center; gap:14px; margin-bottom: 18px; }
  .logo{
    width: 80px; height: 80px;
    border-radius: 22px;
    background: rgba(0,0,0,.25);
    border: 1px solid rgba(255,215,0,.22);
    display:flex; align-items:center; justify-content:center;
    position:relative; overflow:hidden;
    animation: pop 900ms ease-out both;
  }
  .logo img{ width: 58px; height:auto; }
  .logo::after{
    content:"";
    position:absolute; inset:-44px;
    background: linear-gradient(120deg, transparent 35%, rgba(255,215,0,.26) 50%, transparent 65%);
    transform: translateX(-60%) rotate(10deg);
    animation: shine 2.7s ease-in-out infinite;
    pointer-events:none;
  }
  @keyframes shine{
    0%{ transform: translateX(-75%) rotate(10deg); opacity:.22; }
    35%{ opacity:.92; }
    100%{ transform: translateX(75%) rotate(10deg); opacity:.22; }
  }
  @keyframes pop{
    0%{ transform: scale(.75); opacity:0; }
    70%{ transform: scale(1.06); opacity:1; }
    100%{ transform: scale(1); }
  }

  .brand-title h1{
    margin:0;
    font-size: 22px;
    letter-spacing: 1.2px;
    color: var(--gold);
  }
  .brand-title p{
    margin:6px 0 0 0;
    color: var(--muted);
    font-size: 13.5px;
    line-height: 1.45;
  }

  .features{ margin-top: 18px; display:grid; gap: 10px; }
  .feat{
    display:flex; gap:10px; align-items:flex-start;
    padding: 14px 14px;
    border-radius: 18px;
    background: rgba(255,255,255,.03);
    border: 1px solid rgba(255,215,0,.10);
  }
  .dot{
    width: 10px; height: 10px;
    border-radius: 999px;
    margin-top: 4px;
    background: radial-gradient(circle, rgba(255,215,0,1), rgba(255,215,0,.15));
    box-shadow: 0 0 18px rgba(255,215,0,.28);
    flex: 0 0 auto;
  }
  .feat b{ color:#f7f2d3; font-weight: 900; display:block; margin-bottom: 2px; }
  .feat span{ color:#cfcfcf; font-size: 13px; line-height: 1.45; }

  /* RIGHT: ultra premium frame */
  .frame{
    border-radius: 30px;
    padding: 1px;
    background:
      linear-gradient(135deg, rgba(255,215,0,.38), rgba(187,134,252,.24), rgba(255,255,255,.10));
    box-shadow: var(--shadow);
    position: relative;
    overflow:hidden;
    animation: inUp 780ms ease both;
    transform-style: preserve-3d;
  }
  .frame::before{
    content:"";
    position:absolute;
    inset:-80px;
    background: conic-gradient(from 180deg,
      rgba(255,215,0,.0),
      rgba(255,215,0,.35),
      rgba(187,134,252,.28),
      rgba(255,255,255,.12),
      rgba(255,215,0,.0)
    );
    filter: blur(26px);
    opacity:.55;
    animation: orbit 7.5s linear infinite;
    pointer-events:none;
  }
  @keyframes orbit{ to{ transform: rotate(360deg); } }

  .card{
    border-radius: 30px;
    background: var(--glass);
    border: 1px solid rgba(255,255,255,.06);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    padding: 36px 30px;
    position: relative;
    overflow:hidden;
  }
  .card::after{
    content:"";
    position:absolute;
    inset:-60px -140px auto auto;
    width: 360px; height: 360px;
    background: linear-gradient(120deg, transparent 35%, rgba(255,215,0,.10) 50%, transparent 65%);
    transform: translateX(-30%) rotate(12deg);
    opacity:.55;
    animation: sweep 3.8s ease-in-out infinite;
    pointer-events:none;
  }
  @keyframes sweep{
    0%{ transform: translateX(-40%) rotate(12deg); opacity:.25; }
    45%{ opacity:.85; }
    100%{ transform: translateX(40%) rotate(12deg); opacity:.25; }
  }

  .head{ margin-bottom: 16px; position:relative; z-index:1; }
  .head h2{ margin:0; font-size: 22px; letter-spacing:.6px; color:#fff; }
  .head p{ margin:8px 0 0; color: var(--muted); font-size: 13.5px; line-height:1.5; }

  /* flash */
  .flash{
    position:relative; z-index:1;
    padding: 12px;
    margin: 14px 0 14px;
    border-radius: 14px;
    font-size: 14px;
    text-align:center;
    border-left: 4px solid transparent;
    background: rgba(255,255,255,.04);
  }
  .flash.success{ border-left-color: var(--ok); color:#d8ffe5; background: rgba(30,95,43,.35); }
  .flash.error{ border-left-color: var(--danger); color:#ffd0d0; background: rgba(59,29,29,.55); }
  .flash.info{ border-left-color: var(--vio); color:#e5d4ff; background: rgba(43,29,59,.55); }

  /* floating label fields */
  .field{ margin-top: 12px; position:relative; z-index:1; }

  .control{
    position: relative;
    border-radius: 18px;
    background: rgba(0,0,0,.25);
    border: 1px solid rgba(255,255,255,.10);
    transition: .22s;
  }
  .control:focus-within{
    border-color: rgba(255,215,0,.55);
    box-shadow: 0 0 0 4px rgba(255,215,0,.10);
    background: rgba(0,0,0,.34);
  }

  .control input,
  .control textarea{
    width:100%;
    border: none;
    background: transparent;
    color:#fff;
    font-size: 15px;
    outline:none;
    border-radius: 18px;
    padding: 18px 46px 10px 14px; /* input padding */
  }

  .control textarea{
    min-height: 140px;
    resize: none;
    padding-top: 22px; /* little more space for textarea */
  }

  .control label{
    position:absolute;
    left: 14px;
    top: 13px;
    font-size: 13px;
    font-weight: 900;
    color: rgba(255,255,255,.70);
    pointer-events:none;
    transition: .18s;
  }

  .control input:focus + label,
  .control input:not(:placeholder-shown) + label,
  .control textarea:focus + label,
  .control textarea:not(:placeholder-shown) + label{
    top: 7px;
    font-size: 11px;
    color: rgba(255,215,0,.92);
    letter-spacing: .25px;
  }

  .icon{
    position:absolute;
    right: 10px;
    top: 18px; /* better for textarea too */
    width: 34px; height: 34px;
    border-radius: 12px;
    border: 1px solid rgba(255,215,0,.18);
    background: rgba(255,215,0,.08);
    color: var(--gold);
    display:flex; align-items:center; justify-content:center;
    user-select:none;
  }

  /* button + loading */
  .btn{
    position:relative; z-index:1;
    width:100%;
    margin-top: 16px;
    padding: 14px;
    border:none;
    border-radius: 18px;
    background: linear-gradient(135deg, var(--gold), var(--gold2));
    color:#151515;
    font-size: 16px;
    font-weight: 950;
    letter-spacing: .7px;
    cursor:pointer;
    transition:.25s;
    box-shadow: 0 12px 30px rgba(255,215,0,.20);
    display:flex;
    align-items:center;
    justify-content:center;
    gap: 10px;
  }
  .btn:hover{
    transform: translateY(-2px);
    box-shadow: 0 18px 42px rgba(255,215,0,.28);
    background: linear-gradient(135deg, #ffe44d, #d4b200);
  }
  .btn:disabled{
    opacity:.82;
    cursor:not-allowed;
    transform:none;
  }

  .spinner{
    width: 16px; height: 16px;
    border-radius: 999px;
    border: 2px solid rgba(21,21,21,.25);
    border-top-color: rgba(21,21,21,.85);
    display:none;
    animation: spin .8s linear infinite;
  }
  @keyframes spin{ to{ transform: rotate(360deg); } }

  .divider{
    position:relative; z-index:1;
    display:flex; align-items:center; gap:10px;
    margin: 16px 0 10px;
    color: rgba(255,255,255,.55);
    font-size: 12.5px;
  }
  .divider::before, .divider::after{
    content:"";
    height:1px;
    flex:1;
    background: rgba(255,255,255,.08);
  }

  .bottom{
    position:relative; z-index:1;
    margin-top: 10px;
    text-align:center;
    color: var(--muted);
    font-size: 13px;
    line-height: 1.6;
  }
  .bottom a{ color: var(--gold); text-decoration:none; font-weight:900; }
  .bottom a:hover{ text-decoration: underline; }

  @keyframes inUp{
    from{ opacity:0; transform: translateY(16px); }
    to{ opacity:1; transform: translateY(0); }
  }

  @media(max-width: 980px){
    .shell{ grid-template-columns: 1fr; max-width: 560px; }
    .brand{ display:none; }
    .wrap{ padding: 60px 14px; }
  }
</style>

<div class="grain" aria-hidden="true"></div>
<div class="bg-particles" aria-hidden="true">
  <span class="p"></span><span class="p"></span><span class="p"></span><span class="p"></span><span class="p"></span>
</div>

<div class="wrap">
  <div class="shell">

    <!-- LEFT -->
    <section class="brand">
      <div class="brand-top">
        <div class="logo">
          <img src="{{ url_for('static', filename='images/logo.png') }}" alt="HOTEL BUFF">
        </div>
        <div class="brand-title">
          <h1>HOTEL BUFF</h1>
          <p>Executive support channel ‚Äî premium communication with fast response and clarity.</p>
        </div>
      </div>

      <div class="features">
        <div class="feat"><span class="dot"></span><div><b>Fast Response</b><span>We respond as soon as possible with clear next steps.</span></div></div>
        <div class="feat"><span class="dot"></span><div><b>Premium Support</b><span>Professional communication aligned with the hotel experience.</span></div></div>
        <div class="feat"><span class="dot"></span><div><b>Secure Message</b><span>Your message is stored safely (demo storage in your app).</span></div></div>
      </div>
    </section>

    <!-- RIGHT -->
    <section class="frame" id="tiltFrame">
      <div class="card">
        <div class="head">
          <h2>Contact us</h2>
          <p>Send a message to HOTEL BUFF. We will respond as soon as possible.</p>
        </div>

        {% with messages = get_flashed_messages(with_categories=True) %}
          {% if messages %}
            {% for category, msg in messages %}
              <div class="flash {{ category }}">{{ msg }}</div>
            {% endfor %}
          {% endif %}
        {% endwith %}

        <form method="POST" autocomplete="on" id="contactForm">
          <div class="field">
            <div class="control">
              <input id="name" type="text" name="name" required placeholder=" " />
              <label for="name">Your name</label>
              <div class="icon" title="Name">üßë</div>
            </div>
          </div>

          <div class="field">
            <div class="control">
              <input id="email" type="email" name="email" required placeholder=" " />
              <label for="email">Email address</label>
              <div class="icon" title="Email">üìß</div>
            </div>
          </div>

          <div class="field">
            <div class="control">
              <textarea id="message" name="message" required placeholder=" "></textarea>
              <label for="message">Your message</label>
              <div class="icon" title="Message">‚úâÔ∏è</div>
            </div>
          </div>

          <button class="btn" type="submit" id="sendBtn">
            <span class="spinner" id="spinner"></span>
            <span id="btnText">SEND MESSAGE</span>
          </button>

          <div class="divider">HOTEL BUFF</div>

          <div class="bottom">
            <a href="{{ url_for('home') }}">‚Üê Back to Home</a><br>
            HOTEL BUFF ¬© 2026 ¬∑ Black & Gold Edition
          </div>
        </form>
      </div>
    </section>

  </div>
</div>

<script>
  (function(){
    const form = document.getElementById("contactForm");
    const btn = document.getElementById("sendBtn");
    const spinner = document.getElementById("spinner");
    const btnText = document.getElementById("btnText");

    // Loading state
    if(form && btn && spinner && btnText){
      form.addEventListener("submit", () => {
        btn.disabled = true;
        spinner.style.display = "inline-block";
        btnText.textContent = "Sending‚Ä¶";
      });
    }

    // Ultra subtle tilt (desktop)
    const frame = document.getElementById("tiltFrame");
    if(frame && window.matchMedia("(min-width: 981px)").matches){
      frame.addEventListener("mousemove", (e) => {
        const r = frame.getBoundingClientRect();
        const x = (e.clientX - r.left) / r.width - 0.5;
        const y = (e.clientY - r.top) / r.height - 0.5;
        const rx = (-y * 4).toFixed(2);
        const ry = (x * 6).toFixed(2);
        frame.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg)`;
      });
      frame.addEventListener("mouseleave", () => {
        frame.style.transform = "rotateX(0deg) rotateY(0deg)";
      });
    }
  })();
</script>
{% endblock %}
